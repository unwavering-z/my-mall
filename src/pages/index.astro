---
// 1. 导入你的“账本”数据
import productData from '../data/products.json';
import '../styles/mall.css';

// 2. 定义当前品牌（首页默认是感恩册）
const currentBrandId = "ganen";
const currentBrand = productData.brands.find(b => b.id === currentBrandId);

// 3. 自动筛选出属于“感恩册”的产品
const displayProducts = productData.items.filter(item => item.brandId === currentBrandId);
---

<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{currentBrand.name} - 2026春节团购</title>
</head>
<body>
    <header class="hero-banner">
        <img src="/hero-banner.png" alt="马年大吉" />
    </header>

    <main class="mall-container">
        <nav class="side-menu">
            {productData.brands.map((brand) => (
                <a href={`/${brand.slug === 'index' ? '' : brand.slug}`} 
                   class={brand.id === currentBrandId ? "active" : ""}>
                    {brand.name}
                </a>
            ))}
        </nav>

        <section class="product-grid">
            <div class="grid">
                {displayProducts.map((product) => (
                    <a href={/details/${product.detail}} class="product-link">
                        <div class="product-card">
                            <img src={product.image} alt={product.name} />
                            <div class="info">
                                <h3>{product.name}</h3>
                                <p class="price">{product.price}</p>
                            </div>
                        </div>
                    </a>
                ))}
            </div>
        </section>
    </main>
</body>
</html>