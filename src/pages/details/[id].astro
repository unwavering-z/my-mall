---
// src/pages/details/[id].astro
import productData from '../../data/products.json';

// 1. 生成所有产品的详情页路径
export async function getStaticPaths() {
  return productData.items.map(item => ({
    params: { id: item.detail }, // 对应 JSON 里的 detail 字段
    props: { product: item }     // 把整个产品数据传给页面
  }));
}

const { product } = Astro.props;
---

<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{product.name} - 产品详情</title>
</head>
<body>
    <div class="detail-container">
        <img src={product.image.replace('.png', '-full.png')} alt={product.name} />
    </div>

    <button class="back-btn" onclick="history.back()">返回</button>

    <style>
        body { margin: 0; background: #fff; }
        .detail-container img { width: 100%; height: auto; display: block; }
        .back-btn {
            position: fixed; right: 20px; bottom: 50px;
            width: 60px; height: 60px;
            background-color: #28a745; color: white;
            border-radius: 50%; border: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            font-size: 16px; z-index: 1000;
        }
    </style>
</body>
</html>